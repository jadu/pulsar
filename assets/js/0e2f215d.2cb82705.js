"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6434],{9916:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>g});var r=a(3696);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=r.createContext({}),d=function(e){var t=r.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=d(e.components);return r.createElement(i.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=d(a),m=n,g=u["".concat(i,".").concat(m)]||u[m]||c[m]||l;return a?r.createElement(g,o(o({ref:t},p),{},{components:a})):r.createElement(g,o({ref:t},p))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[u]="string"==typeof e?e:n,o[1]=s;for(var d=2;d<l;d++)o[d]=a[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5589:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(3696),n=a(8017);const l={tabItem:"tabItem_wHwb"};function o(e){let{children:t,hidden:a,className:o}=e;return r.createElement("div",{role:"tabpanel",className:(0,n.A)(l.tabItem,o),hidden:a},t)}},2752:(e,t,a)=>{a.d(t,{A:()=>N});var r=a(8102),n=a(3696),l=a(8017),o=a(766),s=a(9519),i=a(5043),d=a(4544),p=a(8708);function u(e){return function(e){return n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:r,default:n}}=e;return{value:t,label:a,attributes:r,default:n}}))}function c(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??u(a);return function(e){const t=(0,d.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:a}=e;const r=(0,s.W6)(),l=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,i.aZ)(l),(0,n.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(r.location.search);t.set(l,e),r.replace({...r.location,search:t.toString()})}),[l,r])]}function y(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,l=c(e),[o,s]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:l}))),[i,d]=g({queryString:a,groupId:r}),[u,y]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,l]=(0,p.Dv)(a);return[r,(0,n.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:r}),f=(()=>{const e=i??u;return m({value:e,tabValues:l})?e:null})();(0,n.useLayoutEffect)((()=>{f&&s(f)}),[f]);return{selectedValue:o,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);s(e),d(e),y(e)}),[d,y,l]),tabValues:l}}var f=a(6681);const b={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};function h(e){let{className:t,block:a,selectedValue:s,selectValue:i,tabValues:d}=e;const p=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.a_)(),c=e=>{const t=e.currentTarget,a=p.indexOf(t),r=d[a].value;r!==s&&(u(t),i(r))},m=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=p.indexOf(e.currentTarget)+1;t=p[a]??p[0];break}case"ArrowLeft":{const a=p.indexOf(e.currentTarget)-1;t=p[a]??p[p.length-1];break}}t?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":a},t)},d.map((e=>{let{value:t,label:a,attributes:o}=e;return n.createElement("li",(0,r.A)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:c},o,{className:(0,l.A)("tabs__item",b.tabItem,o?.className,{"tabs__item--active":s===t})}),a??t)})))}function v(e){let{lazy:t,children:a,selectedValue:r}=e;const l=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function _(e){const t=y(e);return n.createElement("div",{className:(0,l.A)("tabs-container",b.tabList)},n.createElement(h,(0,r.A)({},e,t)),n.createElement(v,(0,r.A)({},e,t)))}function N(e){const t=(0,f.A)();return n.createElement(_,(0,r.A)({key:String(t)},e))}},974:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>g,frontMatter:()=>s,metadata:()=>d,toc:()=>u});var r=a(8102),n=(a(3696),a(9916)),l=a(2752),o=a(5589);const s={id:"repeater",title:"Repeater",sidebar_label:"Repeater"},i=void 0,d={unversionedId:"forms/repeater",id:"forms/repeater",title:"Repeater",description:"Create a repeatable set of form fields that can be added and removed.",source:"@site/docs/forms/repeater.mdx",sourceDirName:"forms",slug:"/forms/repeater",permalink:"/pulsar/docs/forms/repeater",draft:!1,tags:[],version:"current",frontMatter:{id:"repeater",title:"Repeater",sidebar_label:"Repeater"},sidebar:"tutorialSidebar",previous:{title:"Range",permalink:"/pulsar/docs/forms/range"},next:{title:"Select",permalink:"/pulsar/docs/forms/select"}},p={},u=[{value:"Basic usage",id:"basic-usage",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Options",id:"options",level:2},{value:"Headings",id:"headings",level:2},{value:"Nested fields",id:"nested-fields",level:2}],c={toc:u},m="wrapper";function g(e){let{components:t,...a}=e;return(0,n.yg)(m,(0,r.A)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("p",null,"Create a repeatable set of form fields that can be added and removed."),(0,n.yg)("div",{className:"d-example"},(0,n.yg)("form",{method:"POST",encType:"application/x-www-form-urlencoded",className:"form"},(0,n.yg)("div",{className:"repeater","data-repeater":"","data-repeater-add-new-group-text":"Add","data-repeater-add-another-group-text":"Add another","data-repeater-max-entries":"3","data-repeater-preview-colspan":"3","data-repeater-initial-state":"[]"},(0,n.yg)("div",{className:"repeater__saved-data u-display-none","data-repeater-saved-entries-root":!0}),(0,n.yg)("div",{className:"form__group"},(0,n.yg)("span",{className:"control__label"},"The Pulsar team"),(0,n.yg)("div",{className:"controls"},(0,n.yg)("table",{className:"table table--full table--horizontal repeatable__table"},(0,n.yg)("caption",{className:"hide"},"The Pulsar team"),(0,n.yg)("thead",{className:"repeater__preview-headings"},(0,n.yg)("tr",null,(0,n.yg)("th",{"data-repeater-for-name":"text"},"Name"),(0,n.yg)("th",{"data-repeater-for-name":"select2multi"},"Favourite food"),(0,n.yg)("th",{rowSpan:"1",colSpan:"1",className:"shrink-to-fit"},"Actions"))),(0,n.yg)("tbody",{className:"repeater__preview-data","data-repeater-preview-root":!0},(0,n.yg)("tr",{className:"repeater__empty-placeholder","data-repeater-preview-placeholder":!0},(0,n.yg)("td",{colSpan:"2"},"You have not added any team members"),(0,n.yg)("td",{className:"table__td--align-right table-row__actions"}))),(0,n.yg)("tfoot",null,(0,n.yg)("tr",{className:"repeater__group","data-repeater-new-group":!0},(0,n.yg)("td",{className:"table__form",colSpan:"3"},(0,n.yg)("div",{"data-repeater-new-group-controls":!0},(0,n.yg)("fieldset",null,(0,n.yg)("legend",{className:"legend"},"Team Member"),(0,n.yg)("div",{className:"form__group"},(0,n.yg)("label",{htmlFor:"repeater-text",className:"control__label"},"name"),(0,n.yg)("div",{className:"controls"},(0,n.yg)("input",{id:"repeater-text",name:"text",type:"text",className:"form__control"}))),(0,n.yg)("div",{className:"form__group"},(0,n.yg)("label",{htmlFor:"repeater-select2multi",className:"control__label"},"Favourite food"),(0,n.yg)("div",{className:"controls"},(0,n.yg)("select",{id:"repeater-select2multi",name:"select2multi",multiple:!0,"data-label":"Favourite food",className:"form__control select js-select2"},(0,n.yg)("option",{value:"food_pizza"},"Pizza"),(0,n.yg)("option",{value:"food_gravy"},"Gravy"),(0,n.yg)("option",{value:"food_puds"},"Yorkshire Pudding")))))),(0,n.yg)("div",{className:"form__actions repeater__group-actions"},(0,n.yg)("button",{"data-repeater-save-group":"true",type:"button",className:"btn btn--primary repeater__save-group"},"Save"),(0,n.yg)("button",{"data-repeater-cancel-save":"true",type:"button",className:"btn btn--naked repeater__cancel-group"},"Cancel")))))),(0,n.yg)("button",{"data-repeater-add-group":"true",type:"button",className:"btn repeater__add-group"},"Add")))))),(0,n.yg)("h2",{id:"basic-usage"},"Basic usage"),(0,n.yg)(l.A,{groupID:"example",defaultValue:"twig",values:[{label:"Twig",value:"twig"},{label:"HTML",value:"html"}],mdxType:"Tabs"},(0,n.yg)(o.A,{value:"twig",mdxType:"TabItem"},(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-twig"},"{{ form.create() }}\n  {{\n    form.repeater_start({\n      'label': 'The Pulsar team',\n      'empty': 'You have not added any team members',\n      'headings': [\n        { name: 'text', label: 'Name' },\n        { name: 'select2multi', label: 'Favourite food' }\n      ],\n      'max-entries': 3,\n      'add-new-group-text': 'Add',\n      'add-another-group-text': 'Add another'\n    })\n  }}\n\n    {{\n      form.fieldset_start({\n        'legend': 'Team Member'\n      })\n    }}\n\n    {{\n      form.text({\n        'label': 'name',\n        'id': 'repeater-text',\n        'name': 'text'\n      })\n    }}\n\n    {{\n      form.select2({\n        'label': 'Favourite food',\n        'id': 'repeater-select2multi',\n        'name': 'select2multi',\n        'multiple': true,\n        'options': [\n          { value: 'food_pizza', label: 'Pizza' },\n          { value: 'food_gravy', label: 'Gravy' },\n          { value: 'food_puds', label: 'Yorkshire Pudding' }\n        ]\n      })\n    }}\n\n    {{\n      form.fieldset_end()\n    }}\n\n  {{ form.repeater_end() }}\n{{ form.end() }}\n"))),(0,n.yg)(o.A,{value:"html",mdxType:"TabItem"},(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-html"},'<form method="POST" enctype="application/x-www-form-urlencoded" class="form">\n  <div\n      class="repeater"\n      data-repeater\n      data-repeater-add-new-group-text="Add"\n      data-repeater-add-another-group-text="Add another"\n      data-repeater-max-entries="3"\n      data-repeater-preview-colspan="3"\n      data-repeater-initial-state="[]"\n  >\n    <div class="repeater__saved-data u-display-none" data-repeater-saved-entries-root></div>\n    <div class="form__group">\n      <span class="control__label">The Pulsar team</span>\n      <div class="controls">\n        <table class="table table--full table--horizontal repeatable__table">\n          <caption class="hide">The Pulsar team</caption>\n          <thead class="repeater__preview-headings">\n            <tr>\n              <th data-repeater-for-name="text">Name</th>\n              <th data-repeater-for-name="select2multi">Favourite food</th>\n              <th rowspan="1" colspan="1" class="shrink-to-fit">Actions</th>\n            </tr>\n          </thead>\n          <tbody class="repeater__preview-data" data-repeater-preview-root>\n            <tr class="repeater__empty-placeholder" data-repeater-preview-placeholder>\n              <td colspan="2">You have not added any team members</td>\n              <td class="table__td--align-right table-row__actions"></td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr class="repeater__group" data-repeater-new-group>\n              <td class="table__form" colspan="3">\n                <div data-repeater-new-group-controls>\n                  <fieldset>\n                    <legend class="legend">Team Member</legend>\n\n                    <div class="form__group">\n                      <label for="repeater-text" class="control__label">name</label>\n                      <div class="controls">\n                        <input id="repeater-text" name="text" type="text" class="form__control" />\n                      </div>\n                    </div>\n\n                    <div class="form__group">\n                      <label for="repeater-select2multi" class="control__label">Favourite food</label>\n                      <div class="controls">\n                        <select id="repeater-select2multi" name="select2multi" multiple data-label="Favourite food" class="form__control select js-select2">\n                          <option value="food_pizza">Pizza</option>\n                          <option value="food_gravy">Gravy</option>\n                          <option value="food_puds">Yorkshire Pudding</option>\n                        </select>\n                      </div>\n                    </div>\n\n                  </fieldset>\n\n                </div>\n                <div class="form__actions repeater__group-actions">\n                  <button data-repeater-save-group="true" type="button" class="btn btn--primary repeater__save-group">Save</button>\n                  <button data-repeater-cancel-save="true" type="button" class="btn btn--naked repeater__cancel-group">Cancel</button>\n                </div>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n        <button data-repeater-add-group="true" type="button" class="btn repeater__add-group">Add</button>\n      </div>\n    </div>\n  </div>\n</form>\n')))),(0,n.yg)("h2",{id:"dependencies"},"Dependencies"),(0,n.yg)("p",null,"You can configure this helper using the common helper options."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-js",metastring:"index.js","index.js":!0},"var RepeaterManagerComponent = require('/path/to/Repeater/RepeaterManagerComponent'),\n    repeaterComponentFactory = require('/path/to/Repeater/repeaterComponentFactory');\n\nmodule.exports = {\n  RepeaterManagerComponent,\n  repeaterComponentFactory,\n};\n")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-js",metastring:"main.js","main.js":!0},"(function ($) {\n  pulsar.repeaterManager = new pulsar.RepeaterManagerComponent(\n    pulsar.pulsarForm,\n    pulsar.repeaterComponentFactory,\n    $html\n  );\n\n  $(function () {\n    pulsar.repeaterManager.init();\n  });\n}(jQuery));\n")),(0,n.yg)("h2",{id:"options"},"Options"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"Option"),(0,n.yg)("th",{parentName:"tr",align:null},"Type"),(0,n.yg)("th",{parentName:"tr",align:null},"Description"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"label"),(0,n.yg)("td",{parentName:"tr",align:null},"string"),(0,n.yg)("td",{parentName:"tr",align:null},"The repeater input label text")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"empty"),(0,n.yg)("td",{parentName:"tr",align:null},"string"),(0,n.yg)("td",{parentName:"tr",align:null},"The empty placeholder text when no items have been added")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"headings"),(0,n.yg)("td",{parentName:"tr",align:null},"Array"),(0,n.yg)("td",{parentName:"tr",align:null},"An array of heading config objects: ",(0,n.yg)("inlineCode",{parentName:"td"},"{ name: string, label: string }"))),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"max-entries"),(0,n.yg)("td",{parentName:"tr",align:null},"int"),(0,n.yg)("td",{parentName:"tr",align:null},"Maximum (inclusive) number of entries that can be added")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"add-new-group-text"),(0,n.yg)("td",{parentName:"tr",align:null},"string"),(0,n.yg)("td",{parentName:"tr",align:null},"The text content of the add new entry button")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"add-another-group-text"),(0,n.yg)("td",{parentName:"tr",align:null},"string"),(0,n.yg)("td",{parentName:"tr",align:null},"The text content of the add another new entry button")))),(0,n.yg)("h2",{id:"headings"},"Headings"),(0,n.yg)("p",null,"The main configuration item of note is the ",(0,n.yg)("inlineCode",{parentName:"p"},"headings")," property. It is here that we define which nested components are represented as a heading in the Repeater preview. If a nested component does not have an associated heading it will still function as desired, it\u2019s input will be saved and submitted as part of the form request. This allows a user to choose 2-3 preview headings to summarise the contents of a Repeater whilst having as many fields as required."),(0,n.yg)("p",null,"Headings must be described as an array of objects in the following schema:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},"{\n  headings: [\n    { name: string, label: string }\n  ]\n}\n")),(0,n.yg)("p",null,"The ",(0,n.yg)("inlineCode",{parentName:"p"},"name")," property refers, and must match, the corresponding nested field. The ",(0,n.yg)("inlineCode",{parentName:"p"},"label")," property is the text content of the preview column heading."),(0,n.yg)("h2",{id:"nested-fields"},"Nested fields"),(0,n.yg)("p",null,"Nested fields are the input components inside a Repeater. All Pulsar form components should be compatible with the Repeater at the time of publishing. Any additional form components should take into consideration their repeater integration. The Repeater will remove ",(0,n.yg)("inlineCode",{parentName:"p"},"name")," attributes from inputs in order to function, therefore any stateful components that depend on this attribute may need a integration service creating. See the ",(0,n.yg)("inlineCode",{parentName:"p"},"js/Repeater/PseudoRadioInputService.js")," as an example."))}g.isMDXComponent=!0}}]);